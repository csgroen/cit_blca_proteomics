# install.packages(c("targets"))
# see: https://books.ropensci.org/targets/
library(targets)
setwd("~/Desktop/CITproteomics")
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
nps_train <- .nps_train()
# install.packages(c("targets"))
# see: https://books.ropensci.org/targets/
library(targets)
# setwd("~/Desktop/CITproteomics")
R.utils::sourceDirectory("functions", modifiedOnly = FALSE)
nps_train <- .nps_train()
nps_train
#-- Read protein expression data
str_prot <- .pp_strog_prot()
str_prot_exp <-
read_excel("data/other_datasets/Stroggilos_IJC/ijc32556-sup-0001-appendixs1.xlsx", sheet = 2, skip = 6) %>%
select(protein_id = Accession, symbol = `Gene name`, starts_with("Sample"))
str_prot_exp
str_prot_exp <-
read_excel("data/other_datasets/Stroggilos_IJC/ijc32556-sup-0001-appendixs1.xlsx", sheet = 2, skip = 6) %>%
select(protein_id = Accession, symbol = `Gene name`, starts_with("Sample"))
str_prot_counts <- str_prot_exp %>%
select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
group_by(symbol) %>%
slice_max(mean_counts) %>%
ungroup() %>%
select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol") %>%
as.matrix()
str_prot_exp
tar_make()
tar_make()
str_prot_exp <-
read_excel("data/other_datasets/Stroggilos_IJC/ijc32556-sup-0001-appendixs1.xlsx", sheet = 2, skip = 6) %>%
select(protein_id = Accession, symbol = `Gene name`, starts_with("Sample"))
str_prot_counts <- str_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol") %>%
as.matrix()
str_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame()
tr_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol")
str_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol")
str_prot_counts <- str_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts, n = 1) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol") %>%
as.matrix()
str_prot_counts <- str_prot_exp %>%
dplyr::select(symbol, starts_with("Sample")) %>%
mutate(mean_counts = rowMeans(select(., starts_with("Sample")))) %>%
dplyr::group_by(symbol) %>%
slice_max(mean_counts) %>%
slice(n=1) %>%
ungroup() %>%
dplyr::select(-mean_counts) %>%
as.data.frame() %>%
column_to_rownames("symbol") %>%
as.matrix()
? slice
tar_make()
tar_make()
library(needs)
needs::prioritize("dplyr")
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
